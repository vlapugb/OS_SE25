# Многозадачность: AMP и SMP

## 1. Общие понятия многозадачности

**Многозадачность** — способность операционной системы выполнять несколько задач (процессов или потоков) за один и тот же промежуток времени, создавая иллюзию их параллельного выполнения.

Цели многозадачности:
- повышение загрузки процессора;
- сокращение времени отклика;
- эффективное использование вычислительных ресурсов;
- поддержка параллельных вычислений.

Многозадачность особенно важна в многопроцессорных и многоядерных системах, где возможно реальное параллельное выполнение.

---

## 2. AMP (Asymmetric Multiprocessing)

### 2.1 Определение

**AMP (асимметричная многопроцессорность)** — архитектура, при которой каждый процессор (или ядро) имеет заранее определённую роль и выполняет строго закреплённые за ним задачи.

Обычно:
- один процессор — главный (master);
- остальные — вспомогательные (slave).

### 2.2 Особенности AMP

- Каждый процессор может выполнять **свою собственную программу**.
- Процессоры могут работать под управлением **разных операционных систем** или даже без ОС.
- Нет единого планировщика задач для всех процессоров.
- Распределение задач фиксированное и задаётся разработчиком.

### 2.3 Преимущества AMP

- Простота реализации.
- Предсказуемость поведения системы.
- Высокая надёжность для встраиваемых и real-time систем.
- Минимальные накладные расходы на синхронизацию.

### 2.4 Недостатки AMP

- Неэффективное использование ресурсов.
- Сложность масштабирования.
- Перераспределение нагрузки затруднено.
- Зависимость от ручной конфигурации.

### 2.5 Области применения AMP

- Встраиваемые системы.
- Микроконтроллеры.
- Автомобильная электроника.
- RTOS (QNX, VxWorks).
- SoC с гетерогенными ядрами (ARM big.LITTLE в AMP-режиме).

---

## 3. SMP (Symmetric Multiprocessing)

### 3.1 Определение

**SMP (симметричная многопроцессорность)** — архитектура, в которой все процессоры равноправны и работают под управлением одной операционной системы.

Каждый процессор:
- имеет доступ к общей памяти;
- может выполнять любые задачи;
- управляется общим планировщиком ОС.

### 3.2 Особенности SMP

- Единое адресное пространство памяти.
- Одна ОС управляет всеми процессорами.
- Общий планировщик распределяет потоки между ядрами.
- Требуется активная синхронизация (mutex, spinlock).

### 3.3 Преимущества SMP

- Эффективное использование вычислительных ресурсов.
- Автоматическое балансирование нагрузки.
- Простота программирования для пользователя.
- Хорошая масштабируемость.

### 3.4 Недостатки SMP

- Сложность реализации ОС.
- Накладные расходы на синхронизацию.
- Возможны гонки данных и дедлоки.
- Падение производительности при плохой масштабируемости.

### 3.5 Области применения SMP

- Современные ПК и ноутбуки.
- Серверы.
- Мобильные ОС (Linux, Android).
- Большинство универсальных ОС (Linux, Windows, BSD).

---

## 4. Сравнение AMP и SMP

| Характеристика | AMP | SMP |
|---------------|-----|-----|
| Роли процессоров | Разные | Одинаковые |
| ОС | Разные или нет ОС | Одна ОС |
| Планировщик | Отсутствует общий | Общий |
| Балансировка нагрузки | Ручная | Автоматическая |
| Масштабируемость | Плохая | Хорошая |
| Сложность реализации | Низкая | Высокая |

---

## 5. AMP и SMP в контексте ОС

### AMP в ОС:
- ОС управляет только частью процессоров.
- Остальные процессоры выполняют специализированные задачи.
- Часто используется в real-time и embedded системах.

### SMP в ОС:
- ОС полностью контролирует все ядра.
- Поддержка вытесняющей многозадачности.
- Необходима поддержка блокировок, атомарных операций и барьеров памяти.

---

## 6. Итог

- **AMP** — простая, предсказуемая архитектура для специализированных задач.
- **SMP** — универсальная архитектура для многозадачных систем общего назначения.
- Выбор между AMP и SMP определяется требованиями к производительности, масштабируемости и предсказуемости.
